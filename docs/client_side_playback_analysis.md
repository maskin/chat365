# Webアプリ側での音声出力（クライアント再生モデル）の分析

ユーザー様のご質問にある「Webアプリのみから音を出す（ブラウザで音を鳴らす）」構成についての分析です。
この構成は、**「サーバーをクラウド等に置き、手元のタブレットやPCを放送機として使う」** 場合に有効ですが、技術的なハードルがいくつか存在します。

## 1. 構成イメージ
- **サーバー**: クラウド (AWS/GCP) または 社内の別PC
- **クライアント**: 放送室に置いたタブレット/スマホ/PC（Webアプリを表示）
- **動作**: クライアントが定期的にサーバーに「放送予定」を問い合わせ、時間になったら**ブラウザが**音声を再生する。

## 2. 主な課題と対策

### 課題A: ブラウザの自動再生ポリシー (Autoplay Policy)
**問題**: 現代のブラウザ（Chrome, Safari等）は、ユーザーが操作していない状態で突然音を鳴らすことをブロックします。
**対策**:
1.  **「放送開始モード」ボタン**: アプリ起動時に一度、ユーザーに「放送待機を開始」ボタンを押させることで、音声再生の権限を取得します。
2.  **無音再生**: 定期的に無音のファイルを再生し続け、ブラウザに「再生中」と認識させるテクニックを使用します。

### 課題B: スリープとバックグラウンド実行
**問題**: スマホやタブレットは、画面が消える（スリープ）と、ブラウザのJavaScript実行を停止します。これにより、スケジューラーが止まり、放送されません。
**対策**:
1.  **常時画面ON**: 設定またはライブラリ（NoSleep.js等）を使用して、**画面を常に点灯させたまま**にする必要があります。
2.  **電源接続**: 画面常時点灯はバッテリーを消費するため、充電ケーブルの接続が必須です。

### 課題C: サーバーの設置場所 (スマホでサーバーは動くか？)
**問題**: 現在のシステム（Python/Flask）は、スマホ（iOS/Android）上では直接動作しません。
**対策**:
1.  **PCサーバー**: サーバー機能はPC（Windows/Mac/Linux）で動かす必要があります。
2.  **クラウド化**: サーバー機能をクラウドに置けば、スマホは「クライアント（再生機）」として専念できます。

## 3. 結論：実現可能性
**可能ですが、運用ルールが必要です。**

もし「タブレットから音を出したい」場合は、以下の運用ルールを守れば実現可能です。

1.  **専用のタブレットを用意する**（個人のスマホではなく）。
2.  **電源に繋ぎっぱなしにする**。
3.  **「放送待機画面」を開き、画面をつけっぱなしにして置いておく**。

### 推奨される修正工数
この「クライアント再生モデル」に対応させる場合、以下の追加実装が必要です。

- **ポーリング機能**: フロントエンドが定期的にサーバーへ「今の時間の放送はあるか？」を聞きに行く機能。
- **フロントエンド再生機能**: 受け取った音声データ（またはURL）をJavaScriptで再生する機能。
- **Keep Awake実装**: 画面スリープを防止する機能。

**追加工数目安**: +3〜5日
