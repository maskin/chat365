# プロジェクト引継ぎ書: 音声放送制御アプリ

## 1. プロジェクト概要

社内・校内放送をスケジュールに従って自動実行するための音声制御アプリケーションです。
音声入力によって放送内容をタスクとして登録し、指定日時に自動で放送することで、担当者の負担軽減と伝達の正確性向上を目指します。

詳細は `README.md` を参照してください。

## 2. 現状の実装状況

### 2.1. ドキュメント
- `README.md`: プロジェクトの基本概要
- `docs/db_design.md`: データベースのテーブル設計
- `docs/tech_validation.md`: 音声APIの技術検証計画
- `docs/wireframes/wireframe.md`: 画面のワイヤーフレーム

上記ドキュメントが整備されており、プロジェクトの全体像は明確です。

### 2.2. バックエンド (Python / Flask)
- **場所:** `src/backend/`
- **API:**
    - `GET /api/broadcasts`: 放送スケジュールの一覧を取得します。
    - `POST /api/broadcasts`: 新しい放送スケジュールを登録します。
- **データベース:**
    - SQLite (`chat365.db`) を使用しています。
    - `database.py` に `SQLAlchemy` を用いたモデル定義があります。
- **実行方法:**
    ```bash
    cd src/backend
    # 仮想環境がある場合
    # source venv/bin/activate 
    pip install -r requirements.txt
    python app.py
    ```
    サーバーは `http://localhost:5001` で起動します。

### 2.3. フロントエンド (HTML, CSS, JavaScript)
- **場所:** `src/frontend/`
- **機能:**
    - バックエンドAPIと連携し、放送スケジュールの一覧を表示します。
    - 「＋新規放送」ボタンからモーダルを開き、フォーム経由で新しい放送を登録できます。
- **実行方法:**
    - バックエンドサーバーを起動後、ブラウザで `http://localhost:5001` を開くと表示されます。

## 3. 未実装の機能（止まっている作業）

ドキュメントやワイヤーフレームで計画されているものの、以下のコア機能が未実装です。

1.  **スケジュール実行機能:**
    - 放送タスクはDBに登録されるだけで、指定時刻にタスクを自動実行する仕組み（スケジューラー）がありません。

2.  **音声関連機能 (最重要):**
    - **音声認識 (Speech-to-Text):** フロントエンドの「音声入力」ボタンはUIのみで、マイクから音声を取得しテキストに変換する機能が実装されていません。
    - **音声合成 (Text-to-Speech):** 登録されたテキストを音声に変換し、放送する機能がありません。

3.  **緊急放送機能:**
    - UI上の「緊急放送」ボタンに対応するバックエンドロジックがありません。

4.  **タスクの更新・削除機能:**
    - スケジュールを編集・削除するためのUI/APIがありません。

## 4. 今後の推奨タスク

プロジェクトを引き継ぐにあたり、以下の順序で開発を進めることを推奨します。

1.  **【最優先】コア技術の検証と実装:**
    - `docs/tech_validation.md` の計画に基づき、Google Cloudの **Speech-to-Text API** と **Text-to-Speech API** の動作を検証・実装します。これがプロジェクトの技術的な根幹となります。

2.  **スケジューラーの導入:**
    - バックエンドに `APScheduler` などのライブラリを導入し、指定時刻になった放送タスクを自動的に実行する仕組みを構築します。

3.  **音声入力機能の実装:**
    - フロントエンドでマイクから音声を取得し、Speech-to-Text APIを呼び出してテキスト化する機能を実装します。

4.  **音声合成と放送の実行:**
    - スケジューラーがタスクを実行する際に、Text-to-Speech APIを使って放送内容を音声ファイル化し、再生する処理を実装します。

5.  **その他機能の実装:**
    - 緊急放送、タスクの編集・削除機能を実装します。
